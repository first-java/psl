<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jr.jingneng2.ex.dao.TstockInHistoryDao">

	<!-- 自定义结果集,可以将sql语句查询的Resultset结果集与实体类一一对应 -->
	<resultMap type="com.jr.jingneng2.entity.TstockInHistory" id="Tih">
		<!-- 用于主键的映射 -->
		<!-- <id column="id" property="id" javaType="int" /> -->

		<result column="IN_CACHE_RRN" property="inCachRrn" javaType="java.lang.Integer"
			jdbcType="VARCHAR" />
		<result column="BARCODE_TYPE" property="barcodeType" javaType="java.lang.Integer"
			jdbcType="VARCHAR" />
		<result column="BARCODE_RRN" property="barcodeRrn" javaType="java.lang.Integer"
			jdbcType="VARCHAR" />
		<result column="BARCODE_ID" property="barcodeId" javaType="java.lang.String"
			jdbcType="VARCHAR" />
		<result column="LOGIN_RRN" property="loginRrn" javaType="java.lang.Integer"
			jdbcType="VARCHAR" />
		<result column="CACHE_DATE" property="createTimeStamp"
			javaType="java.util.Date" jdbcType="VARCHAR" />
		<result column="RACKING_RRN" property="rackingRrn"
			javaType="java.lang.String" jdbcType="VARCHAR" />
		<result column="STOCK_RRN" property="stockRrn" javaType="java.lang.Integer"
			jdbcType="VARCHAR" />
		<result column="TRANS_RRN" property="transRrn" javaType="java.lang.String"
			jdbcType="VARCHAR" />
	</resultMap>

	<!-- 查询t_material.stock_rrn序列号 -->
	<select id="selectStockSeq" resultType="java.lang.String"
		resultMap="ShippingInformation" useCache="false" flushCache="true">
		SELECT
		T_MATERIAL.stock_rrn.NEXTVAL as stockRrn FROM DUAL
	</select>

	<!-- 查询t_material.in_cache_rrn序列号 -->
	<select id="selectInCacheSeq" resultType="java.lang.String"
		resultMap="ShippingInformation" useCache="false" flushCache="true">
		SELECT
		T_MATERIAL.in_cache_rrn.NEXTVAL as inCacheRrn FROM
		DUAL
	</select>
	<!-- t_stock -->
	<insert id="saveTstock" parameterType="java.util.List"
		useGeneratedKeys="false">
		insert into
		t_material.t_stock
		(stock_rrn,BARCODE_TYPE,BARCODE_RRN,BARCODE_ID,LOGIN_RRN,
		CREATE_TIMESTAMP,BARCODE_STATUS,IN_TRANS,RACKING_RRN,LAST_TRANS)
		<foreach collection="list" item="counter" index="index"
			separator="union all">
			(
			SELECT
			#{counter.stockRrn,jdbcType=VARCHAR},#{counter.barcodeType,jdbcType=VARCHAR},
			#{counter.barcodeRrn,jdbcType=VARCHAR},#{counter.barcodeId,jdbcType=VARCHAR},
			#{counter.loginRrn,jdbcType=VARCHAR},sysdate,
			#{counter.barcodeStatus,jdbcType=VARCHAR},#{counter.inTrans,jdbcType=VARCHAR},
			#{counter.rackingRrn,jdbcType=VARCHAR},#{counter.lastTrans,jdbcType=VARCHAR}
			FROM DUAL )
		</foreach>
	</insert>

</mapper>