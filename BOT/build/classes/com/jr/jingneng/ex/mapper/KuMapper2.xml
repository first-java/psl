<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jr.jingneng.ex.dao.Ku2Dao">

	<!-- 自定义结果集,可以将sql语句查询的Resultset结果集与实体类一一对应 -->
	<resultMap type="com.jr.jingneng.entity.Ku2" id="jn">
		<!-- 用于主键的映射 -->
		<!-- <id column="id" property="id" javaType="int" /> -->
		<result column="bin_Unit_Id" property="binUnitId" javaType="java.lang.String"
			jdbcType="VARCHAR" />
		<result column="outReason" property="outReason" javaType="java.lang.String"
			jdbcType="VARCHAR" />
		<result column="cstorageId" property="cstorageId" javaType="java.lang.String"
			jdbcType="VARCHAR" />
		<result column="qty" property="qty" javaType="java.lang.Double"
			jdbcType="VARCHAR" />
		<result column="modelid" property="modelId" javaType="java.lang.String"
			jdbcType="VARCHAR" />
	</resultMap>
	<!-- 针对于不定向条件的查询，关键在于SQL语句的拼接，根据当前实际的参数来拼接SQL -->
	<select id="selTlbmain" resultType="java.lang.String" resultMap="jn">
		SELECT
		twh.Bin_Unit_ID,twh.OutReason,twh.qty,twh.cstorageId,twh.modelid
		FROM
		tblWareHouse twh
		WHERE
		twh.Bin_Unit_ID=#{reelId,jdbcType=VARCHAR}
		and
		OutReason like '晶能半导体%'
	</select>

	<insert id="saveBarcode" parameterType="java.util.List"
		useGeneratedKeys="false">
		insert into
		sys_psl.JNBDT_KU
		(REELID,STOCKID,ITEMID,QTY,CREATETIME,WORKID,STATUS,BARCODETYPE)
		<foreach collection="list" item="counter" index="index"
			separator="union all">
			(SELECT
			#{counter.reelId,jdbcType=VARCHAR},#{counter.stockId,jdbcType=VARCHAR},
			#{counter.itemId,jdbcType=VARCHAR},#{counter.qty,jdbcType=VARCHAR},sysdate,
			#{counter.workId,jdbcType=VARCHAR},'0',
			#{counter.barcodeType,jdbcType=VARCHAR}
			FROM DUAL)
		</foreach>
	</insert>
</mapper>